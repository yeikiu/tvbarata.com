{"version":3,"sources":["webpack:///./src/views/Home.vue","webpack:////home/runner/work/mono-fe-vue3/mono-fe-vue3/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:////home/runner/work/mono-fe-vue3/mono-fe-vue3/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:////home/runner/work/mono-fe-vue3/mono-fe-vue3/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:////home/runner/work/mono-fe-vue3/mono-fe-vue3/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:////home/runner/work/mono-fe-vue3/mono-fe-vue3/shared/ts-utils/paginate.ts","webpack:///./src/views/Home.vue?4aa3","webpack:///./src/views/Home.vue?5a5e"],"names":["class","for","style","brand","type","id","applyFilters","priceFrom","min","minPrice","max","priceTo","maxPrice","priceMovedDown","pageStatus","itemsToShow","itemId","iFrameUrl","scrolling","frameborder","src","key","endPage","startPage","currentPage","midPages","page","index","_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","paginate","totalItems","pageSize","maxPages","totalPages","Math","ceil","maxPagesBeforeCurrentPage","floor","maxPagesAfterCurrentPage","startIndex","endIndex","pages","keys","map","i","props","String","setup","to","next","location","reload","items","Object","values","filter","prices","price","state","itemsAfterFilters","itemsAfterPriceFilter","oldPrice","value","length","prev","p","slice","render","__scopeId"],"mappings":"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","file":"js/home.b2894052.js","sourcesContent":["<template>\n  <div class=\"container text-justify mt-3\">\n\n    <div v-if=\"brand\" class=\"mt-5 lead text-center\">\n      <p class=\"display-1 text-center d-none d-lg-block\">{{brand}}</p>\n      <p class=\"display-2 text-center d-none d-md-block d-lg-none\">{{brand}}</p>\n      <p class=\"display-3 text-center d-none d-sm-block d-md-none\">{{brand}}</p>\n      <p class=\"display-4 text-center d-block d-sm-none\">{{brand}}</p>\n    </div>\n\n    <div class=\"jumbotron my-3 py-3\">\n      <div class=\"row ml-4\">\n        <input class=\"form-check-input\" type=\"checkbox\" id=\"gridCheck1\" v-model=\"applyFilters\">\n        <label class=\"form-check-label\" for=\"gridCheck1\">\n          Aplicar filtros de búsqueda\n        </label>\n      </div>\n\n      <div v-if=\"applyFilters\" class=\"row mt-4 p-1\">\n        <div class=\"col-12 col-md-6\">\n          <label for=\"customRange1\">Desde - {{priceFrom}} €</label>\n          <input id=\"customRange1\" type=\"range\" class=\"custom-range\" :min=\"minPrice\" :max=\"priceTo\" v-model=\"priceFrom\">\n        </div>\n        <div class=\"col-12 col-md-6\">\n          <label for=\"customRange2\">Hasta - {{priceTo}} €</label>\n          <input id=\"customRange2\" type=\"range\" class=\"custom-range\" :min=\"priceFrom\" :max=\"maxPrice\" v-model=\"priceTo\">\n        </div>\n\n        <div class=\"col-12 col-md-6 pl-5 mt-3\">\n          <input class=\"form-check-input\" type=\"checkbox\" v-model=\"priceMovedDown\">\n          <label class=\"form-check-label\" for=\"gridCheck2\">\n            Ha bajado de precio\n          </label>\n        </div>\n      </div>\n    </div>\n\n    <!--div class=\"col-12 col-md-6 dropdown px-4 mt-3\">\n      <input type=\"text\" class=\"w-100 p-2 m-0\" placeholder=\"Palabras clave\" v-model=\"userInput\" />\n      <div class=\"dropdown-menu show w-100 p-0 m-0\" style=\"max-height: 200px; overflow: scroll;\">\n        <span class=\"dropdown-item text-truncate\" role=\"button\" v-for=\"name of getItems\" :key=\"name\">{{name}}</span>\n      </div>\n    </div-->\n\n    <div class=\"my-5 row justify-content-center\">\n      <iframe style=\"height:240px;\" scrolling=\"no\" frameborder=\"0\" :src=\"iFrameUrl\" class=\"col-6 col-md-4 col-lg-3 my-2 pl-5\" v-for=\"({ itemId, iFrameUrl }) of pageStatus.itemsToShow\" :key=\"itemId\" />\n    </div>\n\n    <!-- PAGINATION -->\n    <ul v-if=\"pageStatus.endPage > pageStatus.startPage\" class=\"pagination justify-content-center mb-5 pb-5\" style=\"cursor: pointer;\">\n      <li class=\"page-item\" v-bind:class=\"currentPage == pageStatus.startPage ? 'active':''\" @click=\"currentPage = pageStatus.startPage\">\n        <a class=\"page-link\"> {{pageStatus.startPage}}</a>\n      </li>\n      <li class=\"page-item\" v-bind:class=\"currentPage == page ? 'active':''\" v-for=\"(page, index) in pageStatus.midPages\" :key=\"index\" @click=\"currentPage = page\">\n        <a class=\"page-link\">{{page}}</a>\n      </li>\n      <li class=\"page-item\" v-bind:class=\"currentPage == pageStatus.endPage ? 'active':''\" @click=\"currentPage = pageStatus.endPage\">\n        <a class=\"page-link\">{{pageStatus.endPage}}</a>\n      </li>\n    </ul>\n\n  </div>\n\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, reactive, toRefs } from 'vue'\nimport { ShopItem } from '@shared/types/ShopItem'\nimport paginate from '@shared/ts-utils/paginate'\nimport { onBeforeRouteUpdate } from 'vue-router'\n\nexport default defineComponent({\n  props: {\n    brand: String\n  },\n  setup (props) {\n    onBeforeRouteUpdate(async (from, to, next) => {\n      await next()\n      location.reload()\n    })\n    const items: ShopItem[] = props.brand ? Object.values<ShopItem>(inject('items', {})).filter(({ brand }) => brand === props.brand) : Object.values<ShopItem>(inject('items', {}))\n\n    const prices = items.map(({ price }) => price)\n    const minPrice = Math.floor(Math.min(...prices))\n    const maxPrice = Math.floor(Math.max(...prices))\n\n    const state = reactive({\n      minPrice,\n      maxPrice,\n      priceFrom: minPrice,\n      priceTo: maxPrice,\n      applyFilters: false,\n      priceMovedDown: false,\n      currentPage: 1\n    })\n\n    const itemsAfterFilters = computed(() => {\n      if (!state.applyFilters) return items\n      const itemsAfterPriceFilter = items.filter(({ price }) => Math.floor(price) >= Math.floor(state.priceFrom) && Math.floor(price) <= Math.floor(state.priceTo))\n      if (state.priceMovedDown) {\n        return itemsAfterPriceFilter.filter(({ oldPrice, price }) => oldPrice && oldPrice > price)\n      }\n      return itemsAfterPriceFilter\n    })\n\n    const pageStatus = computed(() => {\n      const { startPage, endPage, startIndex, endIndex } = paginate(itemsAfterFilters.value.length, state.currentPage, 8)\n      const prev = state.currentPage - 1 >= startPage ? state.currentPage - 1 : 0\n      const next = state.currentPage + 1 <= endPage ? state.currentPage + 1 : 0\n      const midPages = [prev, state.currentPage, next].filter(p => p > startPage && p < endPage)\n\n      const itemsToShow = itemsAfterFilters.value.slice(startIndex, endIndex + 1)\n\n      return {\n        startPage,\n        midPages,\n        endPage,\n        itemsToShow\n      }\n    })\n\n    return { pageStatus, ...toRefs(state) }\n  }\n})\n</script>\n\n<style scoped>\n</style>\n","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","/* https://jasonwatmore.com/post/2018/08/07/javascript-pure-pagination-logic-in-vanilla-js-typescript */\n\nconst paginate = (\n  totalItems: number,\n  currentPage = 1,\n  pageSize = 10,\n  maxPages = 10\n) => {\n  // calculate total pages\n  const totalPages = Math.ceil(totalItems / pageSize)\n\n  // ensure current page isn't out of range\n  if (currentPage < 1) {\n    currentPage = 1\n  } else if (currentPage > totalPages) {\n    currentPage = totalPages\n  }\n\n  let startPage: number, endPage: number\n  if (totalPages <= maxPages) {\n    // total pages less than max so show all pages\n    startPage = 1\n    endPage = totalPages\n  } else {\n    // total pages more than max so calculate start and end pages\n    const maxPagesBeforeCurrentPage = Math.floor(maxPages / 2)\n    const maxPagesAfterCurrentPage = Math.ceil(maxPages / 2) - 1\n    if (currentPage <= maxPagesBeforeCurrentPage) {\n      // current page near the start\n      startPage = 1\n      endPage = maxPages\n    } else if (currentPage + maxPagesAfterCurrentPage >= totalPages) {\n      // current page near the end\n      startPage = totalPages - maxPages + 1\n      endPage = totalPages\n    } else {\n      // current page somewhere in the middle\n      startPage = currentPage - maxPagesBeforeCurrentPage\n      endPage = currentPage + maxPagesAfterCurrentPage\n    }\n  }\n\n  // calculate start and end item indexes\n  const startIndex = (currentPage - 1) * pageSize\n  const endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1)\n\n  // create an array of pages to ng-repeat in the pager control\n  const pages = Array.from(Array((endPage + 1) - startPage).keys()).map(i => startPage + i)\n\n  // return object with all pager properties required by the view\n  return {\n    totalItems: totalItems,\n    currentPage: currentPage,\n    pageSize: pageSize,\n    totalPages: totalPages,\n    startPage: startPage,\n    endPage: endPage,\n    startIndex: startIndex,\n    endIndex: endIndex,\n    pages: pages\n  }\n}\n\nexport default paginate\n","\nimport { computed, defineComponent, inject, reactive, toRefs } from 'vue'\nimport { ShopItem } from '@shared/types/ShopItem'\nimport paginate from '@shared/ts-utils/paginate'\nimport { onBeforeRouteUpdate } from 'vue-router'\n\nexport default defineComponent({\n  props: {\n    brand: String\n  },\n  setup (props) {\n    onBeforeRouteUpdate(async (from, to, next) => {\n      await next()\n      location.reload()\n    })\n    const items: ShopItem[] = props.brand ? Object.values<ShopItem>(inject('items', {})).filter(({ brand }) => brand === props.brand) : Object.values<ShopItem>(inject('items', {}))\n\n    const prices = items.map(({ price }) => price)\n    const minPrice = Math.floor(Math.min(...prices))\n    const maxPrice = Math.floor(Math.max(...prices))\n\n    const state = reactive({\n      minPrice,\n      maxPrice,\n      priceFrom: minPrice,\n      priceTo: maxPrice,\n      applyFilters: false,\n      priceMovedDown: false,\n      currentPage: 1\n    })\n\n    const itemsAfterFilters = computed(() => {\n      if (!state.applyFilters) return items\n      const itemsAfterPriceFilter = items.filter(({ price }) => Math.floor(price) >= Math.floor(state.priceFrom) && Math.floor(price) <= Math.floor(state.priceTo))\n      if (state.priceMovedDown) {\n        return itemsAfterPriceFilter.filter(({ oldPrice, price }) => oldPrice && oldPrice > price)\n      }\n      return itemsAfterPriceFilter\n    })\n\n    const pageStatus = computed(() => {\n      const { startPage, endPage, startIndex, endIndex } = paginate(itemsAfterFilters.value.length, state.currentPage, 8)\n      const prev = state.currentPage - 1 >= startPage ? state.currentPage - 1 : 0\n      const next = state.currentPage + 1 <= endPage ? state.currentPage + 1 : 0\n      const midPages = [prev, state.currentPage, next].filter(p => p > startPage && p < endPage)\n\n      const itemsToShow = itemsAfterFilters.value.slice(startIndex, endIndex + 1)\n\n      return {\n        startPage,\n        midPages,\n        endPage,\n        itemsToShow\n      }\n    })\n\n    return { pageStatus, ...toRefs(state) }\n  }\n})\n","import { render } from \"./Home.vue?vue&type=template&id=15003e2b&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&lang=ts\"\nscript.render = render\nscript.__scopeId = \"data-v-15003e2b\"\n\nexport default script"],"sourceRoot":""}